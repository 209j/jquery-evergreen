<!DOCTYPE html><html lang="en"><head><title>index</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content=""><meta name="groc-document-path" content="index"><meta name="groc-project-path" content="src/jquery.evergreen.js"><meta name="groc-github-url" content="https://github.com/webpro/jquery-evergreen"><link rel="stylesheet" type="text/css" media="all" href="assets/style.css"><script type="text/javascript" src="assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/webpro/jquery-evergreen/blob/master/src/jquery.evergreen.js">src/jquery.evergreen.js</a></div></div><div id="document"><div class="segment"><div class="comments"><div class="wrapper"><h2 id="jquery-evergreen">jQuery Evergreen</h2>

<p>jQuery Evergreen works with modern browsers.
It has the same familiar API as jQuery, and is lean &amp; mean with just the selector, DOM and event methods.</p>

<p>It's under 7KB after minification (&lt;2KB gzipped).</p>

<p>Much of the original jQuery's "weight" is not included at all, such as <code>$.ajax</code>, <code>$.animate</code>, and <code>$.Deferred</code>.</p>

<p>Browser support: latest version of Chrome, Firefox, Safari, Opera, Chrome Mobile iOS, and Mobile Safari. IE10 and IE11.
IE9 only needs a polyfill for <code>classList</code> to make all tests pass.</p>

<p>You can opt-in to work with live Node and NodeList objects (instead of the Array-like <code>$</code> objects).
In this mode, the native <code>Node</code> and <code>NodeList</code> prototypes are augmented to fill up the chainable API,
like <code>forEach</code>, <code>addClass</code>, <code>append</code>, <code>on</code>.</p></div></div><div class="code"><div class="wrapper"><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="nx">factory</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">define</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">define</span><span class="p">.</span><span class="nx">amd</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">define</span><span class="p">(</span><span class="nx">factory</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">root</span><span class="p">.</span><span class="nx">$</span> <span class="o">=</span> <span class="nx">factory</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">isSafe</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="nx">slice</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">slice</span><span class="p">,</span>
        <span class="nx">map</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">map</span><span class="p">;</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h2 id="query-selector">Query selector</h2></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p><code>$</code> is basically a wrapper for <code>querySelectorAll</code>.</p></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">$</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">list</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">list</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">selector</span> <span class="o">!==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>If <code>selector</code> doesn't look like a string, return (maybe a DOM element?)</p></div></div><div class="code"><div class="wrapper">            <span class="nx">list</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">selector</span> <span class="o">:</span> <span class="p">[</span><span class="nx">selector</span><span class="p">];</span>

        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="sr">/^\s*&lt;(\w+|!)[^&gt;]*&gt;/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">selector</span><span class="p">))</span> <span class="p">{</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>If <code>selector</code> looks like an HTML string, create and return a DOM fragment.</p></div></div><div class="code"><div class="wrapper">            <span class="nx">list</span> <span class="o">=</span> <span class="nx">createFragment</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>The <code>context</code> to query elements (default: <code>document</code>).
It can be either a string or a Node (or a NodeList, the first Node will be used).</p></div></div><div class="code"><div class="wrapper">            <span class="nx">context</span> <span class="o">=</span> <span class="nx">context</span> <span class="o">?</span> <span class="k">typeof</span> <span class="nx">context</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span> <span class="o">?</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">:</span> <span class="nx">context</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">context</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">context</span> <span class="o">:</span> <span class="nb">document</span><span class="p">;</span>

            <span class="nx">list</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>

        <span class="p">}</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>For least surprises, always return an array (or <code>NodeList</code> if <code>isSafe = false</code>).</p></div></div><div class="code"><div class="wrapper">        <span class="k">return</span> <span class="nx">isSafe</span> <span class="o">?</span> <span class="nx">wrap</span><span class="p">(</span><span class="nx">list</span><span class="p">)</span> <span class="o">:</span> <span class="nx">list</span><span class="p">;</span>

    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Chaining for the <code>$</code> wrapper (aliasing <code>find</code> for <code>$</code>)</p>

<pre><code>$('.selectors).$('.deep').find('.deepest');
</code></pre></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">find</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Create DOM fragment from an HTML string</p></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">createFragment</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">fragment</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">(),</span>
            <span class="nx">container</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>

        <span class="nx">container</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">html</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>

        <span class="k">while</span><span class="p">(</span><span class="nx">container</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">fragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">container</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">);</span>
        <span class="p">}</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>For least surprises, always return a <code>NodeList</code>.</p></div></div><div class="code"><div class="wrapper">        <span class="k">return</span> <span class="nx">fragment</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">;</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Convert <code>NodeList</code> to <code>Array</code>.</p></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">toArray</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">list</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">list</span><span class="p">);</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h2 id="class-methods">Class methods</h2></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Chainable API for native <code>classList</code>.</p>

<pre><code>$('.myElement').addClass('myClass');
</code></pre></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">addClass</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="p">[</span><span class="k">this</span><span class="p">]).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">removeClass</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="p">[</span><span class="k">this</span><span class="p">]).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">toggleClass</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="p">[</span><span class="k">this</span><span class="p">]).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">hasClass</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="p">[</span><span class="k">this</span><span class="p">]).</span><span class="nx">some</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h2 id="dom-manipulation">DOM Manipulation</h2>

<pre><code>$('.myElement').append('&lt;span&gt;more&lt;/span&gt;');
$('.myList').append('&lt;span&gt;more&lt;/span&gt;');
</code></pre></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">append</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">Node</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">element</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="s1">&#39;beforeend&#39;</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">element</span> <span class="k">instanceof</span> <span class="nx">Node</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nx">element</span> <span class="k">instanceof</span> <span class="nx">NodeList</span> <span class="o">?</span> <span class="nx">toArray</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="o">:</span> <span class="nx">element</span><span class="p">;</span>
                    <span class="nx">elements</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="nx">l</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">elm</span> <span class="o">=</span> <span class="nx">l</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">element</span> <span class="o">:</span> <span class="nx">clone</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
                <span class="nx">append</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">l</span><span class="p">],</span> <span class="nx">elm</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><pre><code>$('.myElement').before(element);
</code></pre></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">before</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">Node</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">element</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="s1">&#39;beforebegin&#39;</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">element</span> <span class="k">instanceof</span> <span class="nx">Node</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nx">element</span> <span class="k">instanceof</span> <span class="nx">NodeList</span> <span class="o">?</span> <span class="nx">toArray</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="o">:</span> <span class="nx">element</span><span class="p">;</span>
                    <span class="nx">elements</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">before</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="nx">l</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">elm</span> <span class="o">=</span> <span class="nx">l</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">element</span> <span class="o">:</span> <span class="nx">clone</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
                <span class="nx">before</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">l</span><span class="p">],</span> <span class="nx">elm</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><pre><code>$('.myList').after(elements);
</code></pre></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">after</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">Node</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">element</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="s1">&#39;afterend&#39;</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">element</span> <span class="k">instanceof</span> <span class="nx">Node</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nx">element</span> <span class="k">instanceof</span> <span class="nx">NodeList</span> <span class="o">?</span> <span class="nx">toArray</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="o">:</span> <span class="nx">element</span><span class="p">;</span>
                    <span class="nx">elements</span><span class="p">.</span><span class="nx">reverse</span><span class="p">().</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">after</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="nx">l</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">elm</span> <span class="o">=</span> <span class="nx">l</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">element</span> <span class="o">:</span> <span class="nx">clone</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
                <span class="nx">after</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">l</span><span class="p">],</span> <span class="nx">elm</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">clone</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">element</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span> <span class="o">+</span> <span class="nx">element</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">element</span> <span class="k">instanceof</span> <span class="nx">Node</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">element</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">map</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">el</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
            <span class="p">});</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">element</span><span class="p">;</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h2 id="events">Events</h2>

<p>Chainable shorthand for <code>addEventListener</code>.
Delegates to <code>delegate</code> if that signature is used.</p>

<pre><code>element.on('click', callback);
element.trigger('click');
</code></pre></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">on</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">useCapture</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">fn</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">useCapture</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">delegate</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="p">[</span><span class="k">this</span><span class="p">]).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">useCapture</span> <span class="o">||</span> <span class="kc">false</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Chainable shorthand for <code>removeEventListener</code>.
Delegates to <code>undelegate</code> if that signature is used.</p>

<pre><code>element.off('click', callback);
</code></pre></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">off</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">useCapture</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">fn</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">useCapture</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">undelegate</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="p">[</span><span class="k">this</span><span class="p">]).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">useCapture</span> <span class="o">||</span> <span class="kc">false</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><pre><code>var handler = function(event) {
    event.target; // child
    event.currentTarget; // container
}
container.delegate('.children', 'click', handler);
$(.children)[2].trigger('click');

container.undelegate('.children', 'click', handler);
</code></pre></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">delegate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">eventName</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">;</span>
        <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="p">[</span><span class="k">this</span><span class="p">]).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">handler</span> <span class="o">=</span> <span class="nx">createEventHandler</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
            <span class="nx">on</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">eventName</span><span class="p">,</span> <span class="nx">handler</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">undelegate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">eventName</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">;</span>
        <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="p">[</span><span class="k">this</span><span class="p">]).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">getEventId</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">_handlers</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">handler</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">off</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">eventName</span><span class="p">,</span> <span class="nx">handler</span><span class="p">);</span>
            <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">element</span><span class="p">));</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">_handlers</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Internal functions to create and get event handlers to remove them later on.</p></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">createEventHandler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">eventName</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">proxyFn</span> <span class="o">=</span> <span class="nx">delegateHandler</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">fn</span><span class="p">),</span>
            <span class="nx">id</span> <span class="o">=</span> <span class="nx">getEventId</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_handlers</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_handlers</span> <span class="o">||</span> <span class="p">{};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_handlers</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_handlers</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">||</span> <span class="p">[];</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_handlers</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">proxyFn</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">proxyFn</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">eventHandlerId</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">getEventId</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">eventName</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">selector</span> <span class="o">+</span> <span class="nx">eventName</span> <span class="o">+</span> <span class="p">(</span><span class="nx">fn</span><span class="p">.</span><span class="nx">_handlerId</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">_handlerId</span> <span class="o">||</span> <span class="o">++</span><span class="nx">eventHandlerId</span><span class="p">);</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Internal function to check whether delegated events match the provided <code>selector</code>; set <code>event.currentTarget</code>;
and actually call the provided event handler.</p></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">delegateHandler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">matchesSelector</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">matchesSelector</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">mozMatchesSelector</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">webkitMatchesSelector</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">msMatchesSelector</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">oMatchesSelector</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">matchesSelector</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">selector</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">event</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Trigger uses <code>CustomEvent</code>.</p>

<pre><code>element.trigger('anyEventName');
</code></pre></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">trigger</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">bubbles</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">options</span><span class="p">.</span><span class="nx">bubbles</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">cancelable</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">options</span><span class="p">.</span><span class="nx">cancelable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CustomEvent</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
        <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="p">[</span><span class="k">this</span><span class="p">]).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h2 id="polyfills">Polyfills</h2></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Polyfill for CustomEvent, borrowed from <a href="https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill">MDN</a>.
Needed to support IE (9, 10, 11)</p></div></div><div class="code"><div class="wrapper">    <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">function</span> <span class="nx">CustomEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">params</span> <span class="o">=</span> <span class="nx">params</span> <span class="o">||</span> <span class="p">{</span> <span class="nx">bubbles</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">cancelable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">detail</span><span class="o">:</span> <span class="kc">undefined</span> <span class="p">};</span>
            <span class="kd">var</span> <span class="nx">evt</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createEvent</span><span class="p">(</span><span class="s1">&#39;CustomEvent&#39;</span><span class="p">);</span>
            <span class="nx">evt</span><span class="p">.</span><span class="nx">initCustomEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">params</span><span class="p">.</span><span class="nx">bubbles</span><span class="p">,</span> <span class="nx">params</span><span class="p">.</span><span class="nx">cancelable</span><span class="p">,</span> <span class="nx">params</span><span class="p">.</span><span class="nx">detail</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">evt</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">CustomEvent</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">CustomEvent</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">CustomEvent</span> <span class="o">=</span> <span class="nx">CustomEvent</span><span class="p">;</span>
    <span class="p">})();</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h2 id="safe-mode">Safe Mode</h2></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Calling <code>$(selector)</code> returns a wrapped array of elements in <strong>safe mode</strong> (default).</p></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">wrap</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">list</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">wrapped</span> <span class="o">=</span> <span class="nx">list</span> <span class="k">instanceof</span> <span class="nx">NodeList</span> <span class="o">?</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">list</span><span class="p">)</span> <span class="o">:</span> <span class="nx">list</span> <span class="k">instanceof</span> <span class="nb">Array</span> <span class="o">?</span> <span class="nx">list</span> <span class="o">:</span> <span class="p">[</span><span class="nx">list</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">proto</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">wrapped</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">proto</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">wrapped</span><span class="p">;</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>In <strong>non-safe mode</strong> a native, augmented NodeList is returned. Use <code>$.safeMode(false)</code> to activate this behavior.
The API is the same in both modes.</p></div></div><div class="code"><div class="wrapper">    <span class="nx">$</span><span class="p">.</span><span class="nx">safeMode</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">safe</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">wasSafe</span> <span class="o">=</span> <span class="nx">isSafe</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">safe</span> <span class="o">===</span> <span class="s1">&#39;boolean&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">isSafe</span> <span class="o">=</span> <span class="nx">safe</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">wasSafe</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isSafe</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">augmentNatives</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">wasSafe</span> <span class="o">&amp;&amp;</span> <span class="nx">isSafe</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">unaugmentNatives</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">isSafe</span><span class="p">;</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>The <code>proto</code> object represents the API that gets augmented onto either the wrapped array (safe mode),
or the native <code>Node</code> and <code>Nodelist</code> objects (non-safe mode).</p></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">proto</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">$</span><span class="o">:</span> <span class="nx">find</span><span class="p">,</span>
        <span class="nx">find</span><span class="o">:</span> <span class="nx">find</span><span class="p">,</span>
        <span class="nx">addClass</span><span class="o">:</span> <span class="nx">addClass</span><span class="p">,</span>
        <span class="nx">removeClass</span><span class="o">:</span> <span class="nx">removeClass</span><span class="p">,</span>
        <span class="nx">toggleClass</span><span class="o">:</span> <span class="nx">toggleClass</span><span class="p">,</span>
        <span class="nx">hasClass</span><span class="o">:</span> <span class="nx">hasClass</span><span class="p">,</span>
        <span class="nx">append</span><span class="o">:</span> <span class="nx">append</span><span class="p">,</span>
        <span class="nx">before</span><span class="o">:</span> <span class="nx">before</span><span class="p">,</span>
        <span class="nx">after</span><span class="o">:</span> <span class="nx">after</span><span class="p">,</span>
        <span class="nx">on</span><span class="o">:</span> <span class="nx">on</span><span class="p">,</span>
        <span class="nx">off</span><span class="o">:</span> <span class="nx">off</span><span class="p">,</span>
        <span class="nx">delegate</span><span class="o">:</span> <span class="nx">delegate</span><span class="p">,</span>
        <span class="nx">undelegate</span><span class="o">:</span> <span class="nx">undelegate</span><span class="p">,</span>
        <span class="nx">trigger</span><span class="o">:</span> <span class="nx">trigger</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>The <code>protoList</code> object represents the API that gets augmented onto the native <code>Nodelist</code> object.
The wrapped array (native <code>Array</code>) already has these (and more).</p></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">protoList</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">toArray</span><span class="o">:</span> <span class="nx">toArray</span><span class="p">,</span>
        <span class="nx">every</span><span class="o">:</span> <span class="nx">array</span><span class="p">.</span><span class="nx">every</span><span class="p">,</span>
        <span class="nx">filter</span><span class="o">:</span> <span class="nx">array</span><span class="p">.</span><span class="nx">filter</span><span class="p">,</span>
        <span class="nx">forEach</span><span class="o">:</span> <span class="nx">array</span><span class="p">.</span><span class="nx">forEach</span><span class="p">,</span>
        <span class="nx">each</span><span class="o">:</span> <span class="nx">array</span><span class="p">.</span><span class="nx">forEach</span><span class="p">,</span>
        <span class="nx">some</span><span class="o">:</span> <span class="nx">array</span><span class="p">.</span><span class="nx">some</span><span class="p">,</span>
        <span class="nx">map</span><span class="o">:</span> <span class="nx">array</span><span class="p">.</span><span class="nx">map</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">NodeProto</span> <span class="o">=</span> <span class="nx">Node</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span>
        <span class="nx">NodeListProto</span> <span class="o">=</span> <span class="nx">NodeList</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span>
        <span class="nx">NodeProtoOriginals</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="nx">NodeListProtoOriginals</span> <span class="o">=</span> <span class="p">{};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Augment native <code>Node</code> and <code>NodeList</code> objects for non-safe mode.</p></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">augmentNatives</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">key</span><span class="p">;</span>

        <span class="k">for</span><span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="nx">proto</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">NodeProtoOriginals</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">NodeProto</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
            <span class="nx">NodeListProtoOriginals</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">NodeListProto</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
            <span class="nx">NodeProto</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">proto</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
            <span class="nx">NodeListProto</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">proto</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="k">for</span><span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="nx">protoList</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">NodeListProtoOriginals</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">NodeListProto</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
            <span class="nx">NodeListProto</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">protoList</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Unaugment native <code>Node</code> and <code>NodeList</code> objects to switch back to safe mode.
Mainly used for tests.</p></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">unaugmentNatives</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">key</span><span class="p">;</span>

        <span class="k">for</span><span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="nx">proto</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">NodeProto</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">NodeProtoOriginals</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
            <span class="nx">NodeListProto</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">NodeListProtoOriginals</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="k">for</span><span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="nx">protoList</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">NodeListProto</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">NodeListProtoOriginals</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">};</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Export the API</p></div></div><div class="code"><div class="wrapper">    <span class="k">return</span> <span class="nx">$</span><span class="p">;</span>

<span class="p">}));</span></div></div></div></div></body></html>